export XDG_CONFIG_HOME="${XDG_CONFIG_HOME:-$HOME/.config}"
export XDG_CACHE_HOME="${XDG_CACHE_HOME:-$HOME/.cache}"
export XDG_DATA_HOME="${XDG_DATA_HOME:-$HOME/.local/share}"
export XDG_STATE_HOME="${XDG_STATE_HOME:-$HOME/.local/state}"

export PASSWORD_STORE_DIR="$XDG_DATA_HOME"/pass
export ANDROID_USER_HOME="$XDG_DATA_HOME"/android
export ICEAUTHORITY="$XDG_CACHE_HOME"/ICEauthority
export GOPATH="$XDG_DATA_HOME"/go
export GOMODCACHE="$XDG_CACHE_HOME"/go/mod
export CARGO_HOME="$XDG_DATA_HOME"/cargo
export RUSTUP_HOME="$XDG_DATA_HOME"/rustup

# config paths
export STARSHIP_CONFIG="$XDG_CONFIG_HOME/starship/config.toml"
export NPM_CONFIG_USERCONFIG="$XDG_CONFIG_HOME/npm/npmrc"
export WGETRC="$XDG_CONFIG_HOME/wget/wgetrc"

# bin path
export PATH=$PATH:$HOME/.local/bin

# set editor to nvim
export EDITOR=nvim

# set manpage viewer to nvim
export MANPAGER="nvim +Man!"

# initialize completion system
autoload -Uz compinit
compinit -d "$XDG_CACHE_HOME"/zsh/zcompdump-$ZSH_VERSION

# aliases
source $XDG_CONFIG_HOME/zsh/aliases

# fzf key bindings and fuzzy completion
source <(fzf --zsh)

# completion styling for fzf-tab
zstyle ':fzf-tab:complete:z:*' fzf-preview 'eza --icons --group-directories-first $realpath'
zstyle ':fzf-tab:complete:nvim:*' fzf-preview  \
  'if [[ -d $realpath ]]; then eza --icons --group-directories-first $realpath; else bat --style=numbers --color=always --line-range=1:200 $realpath 2>/dev/null || head -n 200 $realpath; fi'


# prompt and cli tools
if type starship >/dev/null; then
  eval "$(starship init zsh)"
fi

if type zoxide >/dev/null; then
  eval "$(zoxide init zsh)"
fi

if type atuin >/dev/null; then
  eval "$(atuin init zsh)"
fi

# zsh plugins
source $XDG_CONFIG_HOME/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh
source $XDG_CONFIG_HOME/zsh/plugins/fzf-tab/fzf-tab.zsh
source $XDG_CONFIG_HOME/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
